extrameal_islam_leavel_up = {
	custom_effect_tooltip = extrameal_islam_leavel_up_tt
	hidden_effect = {
		if = {
			limit = { has_dynamic_modifier = { modifier = extrameal_islam_attack1 } }
			remove_dynamic_modifier = { modifier = extrameal_islam_attack1 }
			add_dynamic_modifier = { modifier = extrameal_islam_attack2 }
		}
		else_if = {
			limit = { has_dynamic_modifier = { modifier = extrameal_islam_attack2 } }
			remove_dynamic_modifier = { modifier = extrameal_islam_attack2 }
			add_dynamic_modifier = { modifier = extrameal_islam_attack3 }
		}
		else_if = {
			limit = { has_dynamic_modifier = { modifier = extrameal_islam_attack3 } }
			remove_dynamic_modifier = { modifier = extrameal_islam_attack3 }
			add_dynamic_modifier = { modifier = extrameal_islam_attack4 }
		}
		else_if = {
			limit = { has_dynamic_modifier = { modifier = extrameal_islam_attack4 } }
			remove_dynamic_modifier = { modifier = extrameal_islam_attack4 }
			add_dynamic_modifier = { modifier = extrameal_islam_attack5 }
		}
		if = {
			limit = { is_demilitarized_zone = no }
			set_demilitarized_zone = yes
		}
	}
}

extrameal_islam_leavel_down = {
	custom_effect_tooltip = extrameal_islam_leavel_down_tt
	hidden_effect = {
		if = {
			limit = { has_dynamic_modifier = { modifier = extrameal_islam_attack5 } }
			remove_dynamic_modifier = { modifier = extrameal_islam_attack5 }
			add_dynamic_modifier = { modifier = extrameal_islam_attack4 }
		}
		else_if = {
			limit = { has_dynamic_modifier = { modifier = extrameal_islam_attack4 } }
			remove_dynamic_modifier = { modifier = extrameal_islam_attack4 }
			add_dynamic_modifier = { modifier = extrameal_islam_attack3 }
		}
		else_if = {
			limit = { has_dynamic_modifier = { modifier = extrameal_islam_attack3 } }
			remove_dynamic_modifier = { modifier = extrameal_islam_attack3 }
			add_dynamic_modifier = { modifier = extrameal_islam_attack2 }
		}
		else_if = {
			limit = { has_dynamic_modifier = { modifier = extrameal_islam_attack2 } }
			remove_dynamic_modifier = { modifier = extrameal_islam_attack2 }
			add_dynamic_modifier = { modifier = extrameal_islam_attack1 }
		}
		else_if = {
			limit = { has_dynamic_modifier = { modifier = extrameal_islam_attack1 } }
			remove_dynamic_modifier = { modifier = extrameal_islam_attack1 }
		}
		if = {
			limit = { is_demilitarized_zone = yes }
			set_demilitarized_zone = no
		}
	}
}

transfer_cf_to_mf = {
	if = {
		limit = {
			any_owned_state = {
				will_be_attacked_by_islam = no
				free_building_slots = {
					building = arms_factory
					size = 1
				}
			}
			any_owned_state = {
				will_be_attacked_by_islam = yes
				industrial_complex > 0
			}
		}
		any_owned_state = {
			limit = {
				will_be_attacked_by_islam = no
				free_building_slots = {
					building = arms_factory
					size = 1
				}
			}
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
		any_owned_state = {
			limit = { 
				will_be_attacked_by_islam = yes
				industrial_complex > 0
			}
			remove_building = {
				type = industrial_complex
				level = 1
			}
		}
	}
}

XIN_military_qualities_effect = {
	custom_effect_tooltip = XIN_military_qualities_effect_tt
	set_temp_variable = { mq_c = 1 } multiply_temp_variable = { mq_c = 0.01 } add_variable = { ps_3 = mq_c }
	set_temp_variable = { mq_c = 1 } multiply_temp_variable = { mq_c = 0.02 } add_variable = { ps_4 = mq_c }
	set_temp_variable = { mq_c = 1 } multiply_temp_variable = { mq_c = 0.03 } add_variable = { ps_5 = mq_c }
}

XIN_Expand_conscription = {
	custom_effect_tooltip = XIN_Expand_conscription_effect_tt
	set_temp_variable = { mq_c = -0.75 } multiply_temp_variable = { mq_c = 0.01 } add_variable = { ps_3 = mq_c }
	set_temp_variable = { mq_c = -0.75 } multiply_temp_variable = { mq_c = 0.02 } add_variable = { ps_4 = mq_c }
	set_temp_variable = { mq_c = -0.75 } multiply_temp_variable = { mq_c = 0.03 } add_variable = { ps_5 = mq_c }
}

XIN_Temporary_training = {
	custom_effect_tooltip = XIN_Temporary_training_effect_tt
	set_temp_variable = { mq_c = 0.5 } multiply_temp_variable = { mq_c = 0.01 } add_variable = { ps_3 = mq_c }
	set_temp_variable = { mq_c = 0.5 } multiply_temp_variable = { mq_c = 0.02 } add_variable = { ps_4 = mq_c }
	set_temp_variable = { mq_c = 0.5 } multiply_temp_variable = { mq_c = 0.03 } add_variable = { ps_5 = mq_c }
}


XIN_political_assign_effect = {
	custom_effect_tooltip = XIN_political_assign_effect_tt
	set_temp_variable = { mq_c = 1 } multiply_temp_variable = { mq_c = 0.02 } add_variable = { ps_1 = mq_c }
	set_temp_variable = { mq_c = 1 } multiply_temp_variable = { mq_c = 0.005 } add_variable = { ps_2 = mq_c }
}

XIN_military_equipment_effect = {
	custom_effect_tooltip = XIN_military_equipment_effect_tt
	set_temp_variable = { mq_c = 0.25 } multiply_temp_variable = { mq_c = 0.05 } add_variable = { ps_6 = mq_c }
	set_temp_variable = { mq_c = 0.25 } multiply_temp_variable = { mq_c = 0.05 } add_variable = { ps_7 = mq_c }
	set_temp_variable = { mq_c = 0.25 } multiply_temp_variable = { mq_c = 0.05 } add_variable = { ps_8 = mq_c }
	set_temp_variable = { mq_c = 0.25 } multiply_temp_variable = { mq_c = 0.05 } add_variable = { ps_9 = mq_c }
	set_temp_variable = { mq_c = 0.25 } multiply_temp_variable = { mq_c = 0.05 } add_variable = { ps_10 = mq_c }
	set_temp_variable = { mq_c = 0.25 } multiply_temp_variable = { mq_c = -0.025 } add_variable = { ps_11 = mq_c }
}

XIN_Militarize_productical_corps = {
	custom_effect_tooltip = XIN_Militarize_productical_corps_effect_tt
	set_temp_variable = { mq_c = 0.25 } multiply_temp_variable = { mq_c = 0.01 } add_variable = { ps_3 = mq_c }
	set_temp_variable = { mq_c = 0.25 } multiply_temp_variable = { mq_c = 0.02 } add_variable = { ps_4 = mq_c }
	set_temp_variable = { mq_c = 0.25 } multiply_temp_variable = { mq_c = 0.03 } add_variable = { ps_5 = mq_c }

	set_temp_variable = { mq_c = 0.25 } multiply_temp_variable = { mq_c = 0.05 } add_variable = { ps_6 = mq_c }
	set_temp_variable = { mq_c = 0.25 } multiply_temp_variable = { mq_c = 0.05 } add_variable = { ps_7 = mq_c }
}

XIN_martial_to_production_effect = {
	custom_effect_tooltip = XIN_martial_to_production_effect_tt
	set_temp_variable = { mq_c = 0.25 } multiply_temp_variable = { mq_c = 0.05 } add_variable = { ps_8 = mq_c }
	set_temp_variable = { mq_c = 0.25 } multiply_temp_variable = { mq_c = 0.05 } add_variable = { ps_9 = mq_c }
	set_temp_variable = { mq_c = 0.25 } multiply_temp_variable = { mq_c = 0.05 } add_variable = { ps_10 = mq_c }
	set_temp_variable = { mq_c = 0.25 } multiply_temp_variable = { mq_c = -0.025 } add_variable = { ps_11 = mq_c }
}

XIN_Nsem_10_5_num = {
	clamp_variable = {
		var = Nationalist_sentiment_military
		min = 0
		max = 10
	}
	set_temp_variable = { Nsm_5_10 = Nationalist_sentiment_military } 
	add_to_temp_variable = { temp_Nsm_5_10 = -5 }
}
XIN_Nationalist_sentiment_military_10_5_effect = {
	XIN_Nsem_10_5_num = yes multiply_temp_variable = { temp_Nsm_5_10 = 0.10 } set_variable = { ps_8 = mq_c }
	XIN_Nsem_10_5_num = yes multiply_temp_variable = { temp_Nsm_5_10 = 0.10 } set_variable = { ps_9 = mq_c }
	XIN_Nsem_10_5_num = yes multiply_temp_variable = { temp_Nsm_5_10 = -0.06 } set_variable = { ps_10 = mq_c }
	XIN_Nsem_10_5_num = yes multiply_temp_variable = { temp_Nsm_5_10 = -0.03 } set_variable = { ps_11 = mq_c }
	XIN_Nsem_10_5_num = yes multiply_temp_variable = { temp_Nsm_5_10 = 0.02 } set_variable = { ps_11 = mq_c }
}

XIN_Nsem_0_5_num = {
	clamp_variable = {
		var = Nationalist_sentiment_military
		min = 0
		max = 10
	}
	set_temp_variable = { Nsm_5_10 = Nationalist_sentiment_military } 
	add_to_temp_variable = { temp_Nsm_5_10 = -5 }
	multiply_temp_variable = { temp_Nsm_5_10 = -1 }
}

XIN_Nationalist_sentiment_military_0_5_effect = {
	XIN_Nsem_0_5_num = yes multiply_temp_variable = { temp_Nsm_5_10 = -0.05 } set_variable = { ps_8 = mq_c }
	XIN_Nsem_0_5_num = yes multiply_temp_variable = { temp_Nsm_5_10 = 0.02 } set_variable = { ps_9 = mq_c }
	XIN_Nsem_0_5_num = yes multiply_temp_variable = { temp_Nsm_5_10 = 0.03 } set_variable = { ps_10 = mq_c }
	XIN_Nsem_0_5_num = yes multiply_temp_variable = { temp_Nsm_5_10 = 0.02 } set_variable = { ps_11 = mq_c }
	XIN_Nsem_0_5_num = yes multiply_temp_variable = { temp_Nsm_5_10 = 0.01 } set_variable = { ps_11 = mq_c }
}

XIN_Nationalist_sentiment_military_effect = {
	if = { 
		limit = {
			check_variable = { Nationalist_sentiment_military < 5 }
		}
		XIN_Nationalist_sentiment_military_0_5_effect = yes
	}
	else_if = {
		limit = {
			check_variable = { Nationalist_sentiment_military > 5 }
		}
		XIN_Nationalist_sentiment_military_10_5_effect = yes
	}
	
}